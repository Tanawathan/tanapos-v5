# TanaPOS V5 - 程式碼清理計劃

## 🎯 **清理目標**
簡化專案結構，保留核心功能，提升開發效率

---

## 🗑️ **第一階段：刪除未使用的組件** (22個文件)

### POS 系統清理
```bash
# 刪除未使用的 POS 組件
rm src/components/NewPOSSystem.tsx
rm src/components/ModernPOS.tsx
```

### KDS 系統清理
```bash
# 刪除未使用的 KDS 組件
rm src/components/KDSSystem_new.tsx
rm src/components/KDSSystem_simple.tsx
rm src/components/KDSSystemComplete.tsx
rm src/components/basic/KDSView.tsx
```

### 桌位管理清理
```bash
# 刪除未使用的桌位管理組件
rm src/components/TableManagement.tsx
rm src/pages/TableStatusNew.tsx
rm src/components/SmartTableSelector.tsx
```

### 數據分析清理
```bash
# 刪除未使用的分析組件
rm src/components/analytics/AnalyticsDashboard.tsx
rm src/components/analytics/AdvancedAnalytics.tsx
rm src/components/analytics/InventoryAnalytics.tsx
rm src/components/analytics/PerformanceMonitor.tsx
rm src/components/analytics/RealTimeMonitor.tsx
rm src/components/analytics/SmartAlerts.tsx
```

### 支付系統清理
```bash
# 刪除未使用的支付組件
rm src/components/IntegratedPayment.tsx
rm src/components/payment/PaymentMethods.tsx
rm src/components/payment/CardPayment.tsx
rm src/components/payment/CardPayment-New.tsx
rm src/components/payment/DigitalWalletPayment.tsx
rm src/components/payment/DigitalWalletPayment-New.tsx
```

### 訂單管理清理
```bash
# 刪除未使用的訂單組件
rm src/components/QuickOrderModal.tsx
```

---

## 🔄 **第二階段：路由清理**

### 移除未使用路由
從 `App.tsx` 移除以下路由：
- 所有指向已刪除組件的路由
- 整理路由結構，保持核心功能清晰

### 建議的最終路由結構
```typescript
// 核心業務路由
- / (首頁)
- /pos (POS點餐 - RealDataPOS)
- /kds (廚房顯示 - RealDataKDS)
- /kds-enhanced (智能廚房 - EnhancedKDSSystem)
- /tables (桌位管理 - RealDataTableSelector)
- /tables-enhanced (智能桌位 - EnhancedTableManagement)
- /orders (訂單管理 - OrderManagement)
- /payment (支付系統 - PaymentPage)
- /analytics (數據分析 - SimpleAnalyticsDashboard)
- /performance (性能監控 - SystemPerformanceOptimizer)

// 開發測試路由
- /ui-test (UI測試 - UITestPage)
- /test (通用測試 - TestPage)

// 參考保留路由
- /pos-legacy (舊版POS - 參考用)
- /kds-legacy (舊版KDS - 參考用)
- /tables-old (舊版桌位 - 參考用)
- /tables-modern (現代桌位 - 保留)
```

---

## 📁 **第三階段：目錄結構優化**

### 建議的新目錄結構
```
src/
├── components/
│   ├── core/                    # 核心業務組件
│   │   ├── RealDataPOS.tsx
│   │   ├── RealDataKDS.tsx
│   │   ├── EnhancedKDSSystem.tsx
│   │   ├── RealDataTableSelector.tsx
│   │   └── EnhancedTableManagement.tsx
│   ├── analytics/               # 數據分析
│   │   └── SimpleAnalyticsDashboard.tsx
│   ├── system/                  # 系統工具
│   │   └── SystemPerformanceOptimizer.tsx
│   ├── legacy/                  # 舊版本組件（參考用）
│   │   ├── POSSystem.tsx
│   │   └── KDSSystem.tsx
│   └── modern/                  # 現代化組件
│       └── ModernTableManagement.tsx
├── pages/
│   ├── PaymentPage.tsx
│   ├── OrderManagement.tsx
│   ├── UITestPage.tsx
│   ├── TestPage.tsx
│   └── TableStatus.tsx          # 保留參考
└── ...
```

---

## 🚀 **第四階段：功能模組化**

### 1. 創建共用組件庫
```typescript
// src/components/shared/
├── TableSelector.tsx      # 統一桌位選擇組件
├── OrderDisplay.tsx       # 統一訂單顯示組件
├── PaymentProcessor.tsx   # 統一支付處理組件
└── StatusIndicator.tsx    # 統一狀態指示器
```

### 2. 創建業務邏輯 Hooks
```typescript
// src/hooks/
├── useOrderManagement.ts  # 訂單管理邏輯
├── useTableStatus.ts      # 桌位狀態邏輯
├── usePaymentFlow.ts      # 支付流程邏輯
└── useKitchenDisplay.ts   # 廚房顯示邏輯
```

### 3. 統一數據管理
```typescript
// src/store/
├── orderStore.ts          # 訂單狀態管理
├── tableStore.ts          # 桌位狀態管理
├── paymentStore.ts        # 支付狀態管理
└── systemStore.ts         # 系統狀態管理
```

---

## 📋 **執行檢查清單**

### 清理前準備
- [ ] 備份當前專案
- [ ] 確認主要功能正常運作
- [ ] 記錄當前活躍的路由

### 執行清理
- [ ] 第一階段：刪除未使用組件 (22個)
- [ ] 第二階段：清理路由配置
- [ ] 第三階段：重組目錄結構
- [ ] 第四階段：模組化重構

### 清理後驗證
- [ ] 所有活躍路由正常運作
- [ ] 核心功能測試通過
- [ ] 編譯無錯誤
- [ ] 開發服務器正常啟動

---

## 📊 **預期效果**

### 文件數量減少
- **清理前**: 37個功能組件
- **清理後**: 15個核心組件
- **減少比例**: 59.5%

### 維護效率提升
- 減少代碼重複
- 提升開發專注度
- 簡化測試流程
- 降低錯誤機率

### 專案結構優化
- 清晰的功能分層
- 統一的編碼風格
- 模組化的組件設計
- 易於擴展的架構

---

**建議執行時間**: 1-2 小時  
**風險等級**: 低 (主要刪除未使用文件)  
**優先級**: 高 (提升開發效率)
